<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Board">
<!-- parameterType="com.green.board.dto.BoardDTO"를 입력하지만 별칭인 BoardDTO를 이용하여 작성한다. -->
<select id="select" parameterType="int" resultType="BoardDTO">
   select * from board where bno = #{bno}
</select>

<select id="count" resultType="int">
  SELECT count(*) FORM board
</select>

<delete id="deleteAll" >
   DELETE FROM board
</delete>

<select id="selectAll" resultType="BoardDTO">
   SELECT * FROM board ORDER BY reg_date DESC, bno DESC
</select>

<!-- 매개변수를 동시에 2개 이상 받을 때는 parameterType를 map으로 지정 -->
<select id="selectPage" parameterType="map" resultType="BoardDTO">
   SELECT * FROM board ORDER BY reg_date DESC, bno DESC
   LIMIT #{offset}, #{pageSize}
</select>

<insert id="insert" parameterType="BoardDTO">
  INSERT INTO board(title, content, writer,view_cnt,comment_cnt,reg_date)
  VALUES (title=#{title},content=#{content},writer=#{writer})
</insert>

<!-- 게시판 번호와 작성자가 같아야 글을 식제할 수있도록 한다.  -->
<delete id="delete" parameterType="map">
  DELETE FROM board WHERE bno=#{bno} and writer = #{writer}
</delete>

<update id="update" parameterType="BoardDTO">
  UPDATE board SET title=#{title},content=#{content},writer=#{writer} WHERE bno = #{bno}
</update>

<!-- 조회수 1씩 증가시키는 SQL -->
<update id="increaseViewCnt" parameterType="int">
  UPDATE board SET view_cnt = view_cnt + 1 WHERE bno = #{bno}
</update>
</mapper>        